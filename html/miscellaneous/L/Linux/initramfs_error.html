<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>
            initramfs error - insufficient boot disk space
        </title>
        <meta charset="UTF-8" />
        <link rel="shortcut icon" href="../../../../img/PPJMHJ.ico" />
        <link rel="stylesheet" type="text/css" href="../../../../css/default.css" />
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    </head>


    <body class="w3-container w3-auto w3-section w3-mobile">
        <a href="../../../../html/miscellaneous/E/Erasmus/adages/ubi_bene_ibi_patria.html">
            <img src="../../../../img/Ubi_bene_ibi_patria_logo.jpg" />
        </a>



		<ul class="site_menu">
            <li><a href = "../../../../index.html">Home</a></li>
            <li><a href = "../../../../html/institutions/index.html">Institutions</a></li>
            <li><a href = "../../../../html/projects/index.html">Projects</a></li>
            <li><a href = "../../../../html/events/index.html">Events</a></li>
            <li><a href = "../../../../html/publications/index.html">Publications</a></li>
            <li><a href = "../../../../html/miscellaneous/index.html"  class = "selected">Miscellaneous</a></li>
            <li><a href = "../../../../html/contact.html">Contact</a></li>
		</ul>

        <ul class="site_menu">
            <li><a href = "../../../../html/miscellaneous/A/index.html">A</a></li>
            <li><a href = "../../../../html/miscellaneous/B/index.html">B</a></li>
            <li><a href = "../../../../html/miscellaneous/C/index.html">C</a></li>
            <li><a href = "../../../../html/miscellaneous/D/index.html">D</a></li>
            <li><a href = "../../../../html/miscellaneous/E/index.html">E</a></li>
            <li><a href = "../../../../html/miscellaneous/F/index.html">F</a></li>
            <li><a href = "../../../../html/miscellaneous/G/index.html">G</a></li>
            <li><a href = "../../../../html/miscellaneous/H/index.html">H</a></li>
            <li><a href = "../../../../html/miscellaneous/I/index.html">I</a></li>
            <li><a href = "../../../../html/miscellaneous/J/index.html">J</a></li>
            <li><a href = "../../../../html/miscellaneous/K/index.html">K</a></li>
            <li><a href = "../../../../html/miscellaneous/L/index.html" class = "selected">L</a></li>
            <li><a href = "../../../../html/miscellaneous/M/index.html">M</a></li><br />
            <li><a href = "../../../../html/miscellaneous/N/index.html">N</a></li>
            <li><a href = "../../../../html/miscellaneous/O/index.html">O</a></li>
            <li><a href = "../../../../html/miscellaneous/P/index.html">P</a></li>
            <li><a href = "../../../../html/miscellaneous/Q/index.html">Q</a></li>
            <li><a href = "../../../../html/miscellaneous/R/index.html">R</a></li>
            <li><a href = "../../../../html/miscellaneous/S/index.html">S</a></li>
            <li><a href = "../../../../html/miscellaneous/T/index.html">T</a></li>
            <li><a href = "../../../../html/miscellaneous/U/index.html">U</a></li>
            <li><a href = "../../../../html/miscellaneous/V/index.html">V</a></li>
            <li><a href = "../../../../html/miscellaneous/W/index.html">W</a></li>
            <li><a href = "../../../../html/miscellaneous/X/index.html">X</a></li>
            <li><a href = "../../../../html/miscellaneous/Y/index.html">Y</a></li>
            <li><a href = "../../../../html/miscellaneous/Z/index.html">Z</a></li>
		</ul>


		<ul class="site_menu">
            <li><a href = "../../../../html/miscellaneous/L/LaTeX/index.html">LaTeX</a></li>
            <li><a href = "../../../../html/miscellaneous/L/Linux/index.html"class = "selected">Linux</a></li>
            <li><a href = "../../../../html/miscellaneous/L/literature/index.html">Literature</a></li>
		</ul>

    <ul class="site_menu">
      <li><a href = "../../../../html/miscellaneous/L/Linux/how_to.html" class = "selected">How to?</a></li>
    </ul>


        <h1 class = "big">How to solve the "Package failed to install - initramfs-tools" error?</h1>
        <h2 class = "big">Insufficient boot disk space</h2>

        <div>

            <br />


<h3 class = "big">Problem</h3>

<p>
    We get the following error message:
</p>
    
<code>Package failed to install:
Error while installing package: 
installed initramfs-tools package post-installation script subprocess 
returned error exit status 1</code>


<h3 class = "big">Solution</h3>

<p>
    This problem can be caused by the lack of space on the Boot partition (insufficient boot disk space). if that is the case, we need to increase the space by removing unnecessary kernels.
</p>

<p>
    <b>WARNING</b>: the following operations can destroy your system if applied carelessly. You need to understand what you are doing. It is a synthesis of that worked for me to solve some issues I once encountered with one of my systems. It might not work for you. 
    
    
</p>

<p>It was based on the following pages:

    <ul>
        <li>
            initramfs-tools : Erreur <a href = "https://forum.ubuntu-fr.org/viewtopic.php?id=2072516" target = "_blank">https://forum.ubuntu-fr.org</a>
        </li>
        <li>
            The installation of the package failed initramfs-tool <a href = "https://askubuntu.com/questions/1393700/the-installation-of-the-package-failed-initramfs-tool
            " target = "_blank">https://askubuntu.com</a>
        </li>
        <li>
            How To Fix A Full /boot Partition on Linux <a href = "https://www.jamescoyle.net/how-to/1974-how-to-fix-a-full-boot-partition-on-linux" target = "_blank">https://www.jamescoyle.net</a>
        </li>
        <li>
            initramfs error when installing / updating <a href = "https://askubuntu.com/questions/1136480/initramfs-error-when-installing-updating" target = "_blank">https://askubuntu.com</a>
        </li>
        <li>
            How to Fix sub-process /usr/bin/dpkg returned an error code (1) in Ubuntu <a href = "https://phoenixnap.com/kb/fix-sub-process-usr-bin-dpkg-returned-error-code-1" target = "_blank">https://phoenixnap.com</a>
        </li>
    </ul>
</p>
    

<h4>
How much boot space do we have ?
</h4>

<code>df -h ; echo ; df -ih</code>

<br/>

<code>ls -Sl /boot</code>

<h4>
What are the available Kernels?
</h4>

<code>dpkg --list 'linux-image*'</code>

<h4>
Which one is the current Kernel?
</h4>

<code>uname -a</code>

<br/>

<code>echo; 
dpkg -l \
| awk '!/^rc/ && / \
linux-(c|g|h|i|lo|m|si|t)/{print $1,$2,$3,$4 | \
"sort -k3V | column -t"}'; 
echo -e "\nCurrent kernel : $(uname -mr)"</code>


<h4>
Delete unnecessary kernels.
</h4>
<p>
Let's assume you want to delete the version 6.2.0-12345.
</p>

<code>version=6.2.0-12345
echo $version</code>

<h4>
Inspect the content of the folder.
</h4>

<code>ls -la  /boot/*$version*</code>

<p>Remove the folder</p>
    
<code>sudo rm /boot/*$version*</code>

<h4>Complete the original upgrade now that we have enough space</h4>

<p>We can do this because now we have enough space</p> 

<code>sudo apt-get install -f</code>

<h4>Remove old kernel packages that are no longer needed.</h4>
    
<code>sudo apt-get remove linux-image-$version-tuxedo 
sudo apt autoremove</code>

            <br /><signature> â€” 19 November 2023</signature>

        </div>

    </body>

</html>
